<div class="container">
  <div class="welcome-hero">
    <h2>ğŸ“ <%= @attachment.filename %></h2>
    <p>Encrypted attachment from post by <%= @post.user.display_name || @post.user.username %></p>
  </div>

  <div class="attachment-viewer">
    <div class="attachment-details">
      <div class="detail-group">
        <strong>File Type:</strong> <%= @attachment.content_type %>
      </div>
      <div class="detail-group">
        <strong>Size:</strong> <%= @attachment.human_file_size %>
      </div>
      <div class="detail-group">
        <strong>Added:</strong> <%= @attachment.created_at.strftime("%B %d, %Y at %I:%M %p") %>
      </div>
    </div>

    <% if @attachment.is_image? %>
      <div class="image-viewer">
        <div class="encrypted-placeholder">
          <div class="placeholder-icon">ğŸ–¼ï¸</div>
          <h3>Encrypted Image</h3>
          <p>This image is end-to-end encrypted. In a full implementation, it would be decrypted and displayed here using your private keys.</p>
          <div class="decryption-status">
            <span class="status-badge encrypted">ğŸ” Encrypted</span>
          </div>
        </div>
      </div>
    <% elsif @attachment.is_video? %>
      <div class="video-viewer">
        <div class="encrypted-placeholder">
          <div class="placeholder-icon">ğŸ¥</div>
          <h3>Encrypted Video</h3>
          <p>This video is end-to-end encrypted. In a full implementation, it would be decrypted and played here using your private keys.</p>
          <div class="decryption-status">
            <span class="status-badge encrypted">ğŸ” Encrypted</span>
          </div>
        </div>
      </div>
    <% elsif @attachment.is_audio? %>
      <div class="audio-viewer">
        <div class="encrypted-placeholder">
          <div class="placeholder-icon">ğŸµ</div>
          <h3>Encrypted Audio</h3>
          <p>This audio file is end-to-end encrypted. In a full implementation, it would be decrypted and played here using your private keys.</p>
          <div class="decryption-status">
            <span class="status-badge encrypted">ğŸ” Encrypted</span>
          </div>
        </div>
      </div>
    <% else %>
      <div class="file-viewer">
        <div class="encrypted-placeholder">
          <div class="placeholder-icon">ğŸ“„</div>
          <h3>Encrypted File</h3>
          <p>This file is end-to-end encrypted. In a full implementation, it would be decrypted and available for download using your private keys.</p>
          <div class="decryption-status">
            <span class="status-badge encrypted">ğŸ” Encrypted</span>
          </div>
        </div>
      </div>
    <% end %>

    <div class="attachment-actions">
      <button class="btn btn-primary" onclick="decryptAndView()" disabled>
        ğŸ”“ Decrypt & View
      </button>
      <button class="btn btn-secondary" onclick="downloadEncrypted()" disabled>
        ğŸ“¥ Download Encrypted
      </button>
      <%= link_to "Back to Post", @post, class: "btn btn-outline" %>
    </div>

    <div class="security-info">
      <h3>ğŸ›¡ï¸ Security Information</h3>
      <ul>
        <li><strong>End-to-End Encrypted:</strong> This file was encrypted on the sender's device before upload</li>
        <li><strong>Zero-Knowledge:</strong> The server cannot decrypt or view this content</li>
        <li><strong>Private Keys Required:</strong> Only your private keys can decrypt this content</li>
        <li><strong>Blockchain Integration:</strong> File integrity is verified using blockchain checksums</li>
      </ul>
    </div>
  </div>
</div>


<script>
function decryptAndView() {
  // Placeholder for client-side decryption
  alert('ğŸ”§ Decryption functionality would be implemented here using client-side cryptography with your private keys.');
}

function downloadEncrypted() {
  // Placeholder for encrypted download
  alert('ğŸ”§ Encrypted download functionality would be implemented here.');
}
</script>